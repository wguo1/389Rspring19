# Writeup 3 - Operational Security and Social Engineering

Name: William Guo
Section: 0101

I pledge on my honor that I have not given or received any unauthorized assistance on this assignment or examniation.

Digital acknowledgement: William Guo

## Assignment Writeup

### Part 1 (40 pts)

Flag: CMSC389R-{digging_f0r_flag5_thr0ugh_1njec7ion}

nc 142.93.136.81 1337
Give me a domain or IP to look up:
& cd home;cat flag.txt

This was a really interesting assignment because I really was stuck on what to do. I knew
that I had to use the nc line as part of my input but I didn't know how to use it. I first tried
to use heartbleed since it was in the slides. Well it didn't really do anything but at least now I know
how to use it. I used a bunch of inputs like the actual ip address when prompted but it returned 
information that didn't help. I then looked up online on what command injections looked like. Alot of them
had multiple commands seperated by & or |. It was intersting because I knew what they were but
I guess I had never thought of using them. So I first tested my theory with "& ls". Suprisingly
it returned the directory of the shell. However when I tried to switch directories I got no output.
It was really frustrating because "cd" has no output so I couldn't check if it worked or not. Also
I was stuck on how to execute multiple commands. I again looked online and found that semicolon is
used to seperate different commands. This was exactly what I needed. I used the screenshot as a template
into where the flag potentially could be. I first used "less" but for some reason it didn't work. I'm pretty
sure it doesn't really work with really small files so I used "cat" instead. And of course that worked splendidly
I think this should be a pretty easy fix since the input is user generated. It follows along the same line as
SQL injection or XSS that the programmer should have sanitized the input. Maybe replace semicolons and andpersand
with whitespace or something. That's the easiest and most user friendly way of defending against this.

### Part 2 (60 pts)

This part of the project was actually pretty tough because for the longest time I tried to create a reverse
shell of the web server. After doing that for a really long time I figured out that it just wasn't working. After
reading Piazza I got the idea that I could just create a pseudo shell that acted the same way as a real shell would.
So I did have to get around the problem of a continous shell. The connection would only be open for a single input
before closing so I had problems because my program was stateless. I decided just to keep all inputs that the user gave
and throw them all into the connection every single time kind of like a giant cookie. I also encountered problems with
having the output come at all times even though the user should only see the output of the current command. To fix this
I kept the length of the previous output and just returned a substring of the new output. Also to find the current path I used "pwd"
and found the new path every time it was done. Other than that my other main concern was the "pull" command. I had trouble
trying to output the file into the socket and messing around with that. I ended up just running "cat" on whatever
file it was and outputing the file contents through the socket. Then I recreated it on the local machine.


